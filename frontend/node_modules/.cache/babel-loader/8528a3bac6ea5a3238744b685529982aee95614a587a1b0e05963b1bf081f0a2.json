{"ast":null,"code":"var _jsxFileName = \"E:\\\\Games\\\\CrossMove\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport GameBoard from \"./components/GameBoard\";\nimport GameStatus from \"./GameStatus\";\nimport { fetchAiMove, validateMove } from \"./utils/api\";\nimport { checkWinner } from \"./utils/validations\";\nimport { PLAYER, AI } from \"./utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [board, setBoard] = useState(Array(3).fill(null).map(() => Array(3).fill(null)));\n  const [phase, setPhase] = useState(\"place\");\n  const [playerMoves, setPlayerMoves] = useState(0);\n  const [aiMoves, setAiMoves] = useState(0);\n  const [status, setStatus] = useState(\"Your turn to place your coins!\");\n  const [selectedPiece, setSelectedPiece] = useState(null);\n  const [loadingAi, setLoadingAi] = useState(false); // Track AI's thinking state\n\n  const handleCellClick = async (row, col) => {\n    if (!Array.isArray(board) || board.length !== 3 || !board[0].length === 3) {\n      console.error(\"Board is not properly initialized\");\n      return;\n    }\n    if (phase === \"place\") {\n      if (playerMoves < 3 && !board[row][col]) {\n        const newBoard = board.map((r, i) => r.map((c, j) => i === row && j === col ? PLAYER : c));\n        setBoard(newBoard);\n        setPlayerMoves(playerMoves + 1);\n        setStatus(\"AI is thinking...\");\n        if (playerMoves + 1 === 3 && aiMoves === 3) {\n          setPhase(\"move\");\n          setStatus(\"Select a coin to move!\");\n        } else {\n          try {\n            const aiMove = await fetchAiMove(newBoard, \"place\");\n            console.log(\"AI Move:\", aiMove); // Log AI move to verify the structure\n\n            if (aiMove && aiMove.row !== undefined && aiMove.col !== undefined) {\n              newBoard[aiMove.row][aiMove.col] = AI;\n              setAiMoves(aiMoves + 1);\n              setBoard(newBoard);\n            } else {\n              console.error(\"Invalid AI move\", aiMove);\n              setStatus(\"AI failed to make a valid move, try again!\");\n            }\n          } catch (error) {\n            console.error(\"Error fetching AI move:\", error);\n            setStatus(\"Error during AI move, please try again!\");\n          }\n        }\n      }\n    } else if (phase === \"move\") {\n      if (selectedPiece) {\n        if (selectedPiece.row === row && selectedPiece.col === col) {\n          setSelectedPiece(null);\n          setStatus(\"Select a coin to move!\");\n        } else {\n          const isValid = await validateMove(selectedPiece, {\n            row,\n            col\n          }, board);\n          if (isValid) {\n            const newBoard = board.map((r, i) => r.map((c, j) => {\n              if (i === selectedPiece.row && j === selectedPiece.col) return null;\n              if (i === row && j === col) return PLAYER;\n              return c;\n            }));\n            setBoard(newBoard);\n            setSelectedPiece(null);\n            setStatus(\"AI is thinking...\");\n            try {\n              const aiMove = await fetchAiMove(newBoard, \"move\");\n              console.log(\"AI Move:\", aiMove);\n              if (aiMove && aiMove.from && aiMove.to) {\n                newBoard[aiMove.to.row][aiMove.to.col] = AI;\n                newBoard[aiMove.from.row][aiMove.from.col] = null;\n                setBoard(newBoard);\n              } else {\n                console.error(\"Invalid AI move\", aiMove);\n                setStatus(\"AI failed to make a valid move, try again!\");\n              }\n            } catch (error) {\n              console.error(\"Error fetching AI move:\", error);\n              setStatus(\"Error during AI move, please try again!\");\n            }\n          } else {\n            setStatus(\"Invalid move! Select again.\");\n          }\n        }\n      } else if (board[row][col] === PLAYER) {\n        setSelectedPiece({\n          row,\n          col\n        });\n        setStatus(\"Select a destination.\");\n      }\n    }\n  };\n  useEffect(() => {\n    const winner = checkWinner(board);\n    if (winner) {\n      setStatus(`${winner} wins!`);\n      setPhase(\"end\");\n    }\n  }, [board]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Advanced Tic-Tac-Toe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GameStatus, {\n      status: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GameBoard, {\n      board: board,\n      selectedPiece: selectedPiece,\n      handleCellClick: handleCellClick,\n      loadingAi: loadingAi // Pass loading state to GameBoard\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => window.location.reload(),\n      children: \"New Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"tWuu2cCZYT1SyV3XEpD6j8x354Q=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","GameBoard","GameStatus","fetchAiMove","validateMove","checkWinner","PLAYER","AI","jsxDEV","_jsxDEV","App","_s","board","setBoard","Array","fill","map","phase","setPhase","playerMoves","setPlayerMoves","aiMoves","setAiMoves","status","setStatus","selectedPiece","setSelectedPiece","loadingAi","setLoadingAi","handleCellClick","row","col","isArray","length","console","error","newBoard","r","i","c","j","aiMove","log","undefined","isValid","from","to","winner","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","_c","$RefreshReg$"],"sources":["E:/Games/CrossMove/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport GameBoard from \"./components/GameBoard\";\r\nimport GameStatus from \"./GameStatus\";\r\nimport { fetchAiMove, validateMove } from \"./utils/api\";\r\nimport { checkWinner } from \"./utils/validations\";\r\nimport { PLAYER, AI } from \"./utils/constants\";\r\n\r\nconst App = () => {\r\n  const [board, setBoard] = useState(Array(3).fill(null).map(() => Array(3).fill(null)));\r\n  const [phase, setPhase] = useState(\"place\");\r\n  const [playerMoves, setPlayerMoves] = useState(0);\r\n  const [aiMoves, setAiMoves] = useState(0);\r\n  const [status, setStatus] = useState(\"Your turn to place your coins!\");\r\n  const [selectedPiece, setSelectedPiece] = useState(null);\r\n  const [loadingAi, setLoadingAi] = useState(false); // Track AI's thinking state\r\n\r\n  const handleCellClick = async (row, col) => {\r\n    if (!Array.isArray(board) || board.length !== 3 || !board[0].length === 3) {\r\n      console.error(\"Board is not properly initialized\");\r\n      return;\r\n    }\r\n  \r\n    if (phase === \"place\") {\r\n      if (playerMoves < 3 && !board[row][col]) {\r\n        const newBoard = board.map((r, i) =>\r\n          r.map((c, j) => (i === row && j === col ? PLAYER : c))\r\n        );\r\n        setBoard(newBoard);\r\n        setPlayerMoves(playerMoves + 1);\r\n        setStatus(\"AI is thinking...\");\r\n  \r\n        if (playerMoves + 1 === 3 && aiMoves === 3) {\r\n          setPhase(\"move\");\r\n          setStatus(\"Select a coin to move!\");\r\n        } else {\r\n          try {\r\n            const aiMove = await fetchAiMove(newBoard, \"place\");\r\n            console.log(\"AI Move:\", aiMove); // Log AI move to verify the structure\r\n  \r\n            if (aiMove && aiMove.row !== undefined && aiMove.col !== undefined) {\r\n              newBoard[aiMove.row][aiMove.col] = AI;\r\n              setAiMoves(aiMoves + 1);\r\n              setBoard(newBoard);\r\n            } else {\r\n              console.error(\"Invalid AI move\", aiMove);\r\n              setStatus(\"AI failed to make a valid move, try again!\");\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error fetching AI move:\", error);\r\n            setStatus(\"Error during AI move, please try again!\");\r\n          }\r\n        }\r\n      }\r\n    } else if (phase === \"move\") {\r\n      if (selectedPiece) {\r\n        if (selectedPiece.row === row && selectedPiece.col === col) {\r\n          setSelectedPiece(null);\r\n          setStatus(\"Select a coin to move!\");\r\n        } else {\r\n          const isValid = await validateMove(selectedPiece, { row, col }, board);\r\n          if (isValid) {\r\n            const newBoard = board.map((r, i) =>\r\n              r.map((c, j) => {\r\n                if (i === selectedPiece.row && j === selectedPiece.col) return null;\r\n                if (i === row && j === col) return PLAYER;\r\n                return c;\r\n              })\r\n            );\r\n            setBoard(newBoard);\r\n            setSelectedPiece(null);\r\n            setStatus(\"AI is thinking...\");\r\n  \r\n            try {\r\n              const aiMove = await fetchAiMove(newBoard, \"move\");\r\n              console.log(\"AI Move:\", aiMove);\r\n  \r\n              if (aiMove && aiMove.from && aiMove.to) {\r\n                newBoard[aiMove.to.row][aiMove.to.col] = AI;\r\n                newBoard[aiMove.from.row][aiMove.from.col] = null;\r\n                setBoard(newBoard);\r\n              } else {\r\n                console.error(\"Invalid AI move\", aiMove);\r\n                setStatus(\"AI failed to make a valid move, try again!\");\r\n              }\r\n            } catch (error) {\r\n              console.error(\"Error fetching AI move:\", error);\r\n              setStatus(\"Error during AI move, please try again!\");\r\n            }\r\n          } else {\r\n            setStatus(\"Invalid move! Select again.\");\r\n          }\r\n        }\r\n      } else if (board[row][col] === PLAYER) {\r\n        setSelectedPiece({ row, col });\r\n        setStatus(\"Select a destination.\");\r\n      }\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    const winner = checkWinner(board);\r\n    if (winner) {\r\n      setStatus(`${winner} wins!`);\r\n      setPhase(\"end\");\r\n    }\r\n  }, [board]);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <h1>Advanced Tic-Tac-Toe</h1>\r\n      <GameStatus status={status} />\r\n      <GameBoard\r\n        board={board}\r\n        selectedPiece={selectedPiece}\r\n        handleCellClick={handleCellClick}\r\n        loadingAi={loadingAi} // Pass loading state to GameBoard\r\n      />\r\n      <button onClick={() => window.location.reload()}>New Game</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}